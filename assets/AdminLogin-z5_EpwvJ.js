import{d as w,ac as N,f,ad as B,c as C,a4 as n,a3 as e,a as t,ak as _,al as i,a7 as K,B as L,a0 as F,am as I,o as h,a8 as y,a9 as R}from"./index-Bg24sjJq.js";import{e as A}from"./validator-C7mvf0Ig.js";import{a as q,N as g,b as v}from"./FormItem-CrB1S8pk.js";const D={"auth/user-not-found":"查無此信箱","auth/wrong-password":"密碼錯誤","department admin 404":"此系所查無此管理員"},M=w({__name:"LoginForm",setup(b){const d=F(),p=I(),m=N(),r=f(!1),c=f(null),a=B({email:"",password:""}),k={email:{required:!0,trigger:"blur",message:"請輸入正確電子信箱",validator:A},password:{required:!0,message:"請輸入正確密碼",trigger:"blur"}},x=async()=>{const s=await d.dispatch("adminLogin",{email:a.email,password:a.password});if(s)return m.error(D[s]);s||(m.success("登入成功 !"),p.push({name:"Dashboard"}))},l=async()=>{r.value=!0,c.value.validate(async s=>{if(s){r.value=!1;return}await x()}),r.value=!1};return(s,o)=>(h(),C(e(q),{model:e(a),rules:k,ref_key:"formRef",ref:c},{default:n(()=>[t(e(v),{label:"電子信箱",path:"email"},{default:n(()=>[t(e(g),{placeholder:"請輸入",value:e(a).email,"onUpdate:value":o[0]||(o[0]=u=>e(a).email=u),onKeyup:_(i(l,["prevent"]),["enter"])},null,8,["value","onKeyup"])]),_:1}),t(e(v),{label:"密碼",path:"password"},{default:n(()=>[t(e(g),{type:"password","show-password-on":"click",placeholder:"請輸入",value:e(a).password,"onUpdate:value":o[1]||(o[1]=u=>e(a).password=u),onKeyup:_(i(l,["prevent"]),["enter"])},null,8,["value","onKeyup"])]),_:1}),t(e(L),{class:"signin-btn",loading:e(r),block:"",type:"primary",onClick:i(l,["prevent"])},{default:n(()=>o[2]||(o[2]=[K("登入")])),_:1,__:[2]},8,["loading"])]),_:1},8,["model"]))}}),S=y(M,[["__scopeId","data-v-8cf7b497"]]),U={class:"admin-login"},V=w({__name:"AdminLogin",setup(b){return(d,p)=>(h(),R("main",U,[t(S)]))}}),j=y(V,[["__scopeId","data-v-5ba0d872"]]);export{j as default};
